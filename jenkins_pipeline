pipeline{
    agent {label "yuvi-server"}
  stages{ 
         stage("Code"){
           steps{
              git url: "https://github.com/yuvraj715/django-notes-app.git" , branch: "main"
               echo 'code clone ho gya'
           }
         }
         stage("Scaning images"){
           steps{
               echo 'image scan ho gyi hai'
           }
         }
         stage ("Build and Test"){
           steps{
             sh "docker build -t note-app ."
              echo 'build bhi ho gya'
           }
         }   
         stage("Push to Dockerhub"){
           steps{
               echo 'dockerhub par push bhi ho gya'
           }
         }
         stage("Deploy"){
           steps{
               sh "docker-compose down && docker-compose up -d"
               echo 'deploy bhi ho gya'
           }
         }
         
    }
}
